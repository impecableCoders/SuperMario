<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <script src="https://unpkg.com/pygame-js@0.0.7/pygame.js"></script>
</head>
<body onload="runGame()">
  <script>
    function runGame() {
      // Initialize Pygame and create a window
      pygame.init();
      const screenWidth = 600;
      const screenHeight = 500;
      const screen = pygame.display.set_mode([screenWidth, screenHeight]);
      pygame.display.set_caption('Mario');

      // Load the images of Mario running
      const playerImages = [
        pygame.image.load('Bilder/oben.png').convert_alpha(),
        pygame.image.load('Bilder/unten.png').convert_alpha(),
        pygame.image.load('Bilder/rechts.png').convert_alpha(),
        pygame.image.load('Bilder/links.png').convert_alpha(),
        pygame.image.load('Bilder/left1.png').convert_alpha(),
        pygame.image.load('Bilder/right1.png').convert_alpha()
      ];

      // Load the stone image
      let stoneImage = pygame.image.load('Bilder/Steine/1.png').convert_alpha();
      stoneImage = pygame.transform.smoothscale(stoneImage, [30, 30]);
      const stoneRect = stoneImage.get_rect({ x: 200, y: 200 });

      // Load the background image and scale it to fit the screen
      const originalBackground = pygame.image.load('Bilder/background.jpg').convert_alpha();
      const background = pygame.transform.scale(originalBackground, [screenWidth, screenHeight]);

      // Set the player's initial position and speed
      let playerImage = playerImages[1];
      const playerRect = playerImage.get_rect({ x: 100, y: 200 });
      const speed = 5;

      // Create a clock to control the frame rate
      const clock = pygame.time.Clock();

      // Main game loop
      while (true) {
        // Handle events
        for (const event of pygame.event.get()) {
          if (event.type === pygame.QUIT) {
            pygame.quit();
            process.exit();
          }
        }

        // Update the player's position based on key input
        const keys = pygame.key.get_pressed();
        if (keys[pygame.K_UP]) {
          playerImage = playerImages[0];
          playerRect.move_ip(0, -speed);
        }
        if (keys[pygame.K_DOWN]) {
          playerImage = playerImages[1];
          playerRect.move_ip(0, speed);
        }
        if (keys[pygame.K_RIGHT]) {
          if (pygame.time.get_ticks() % 100 < 50) {
            playerImage =          playerImages[2];
          } else {
            playerImage = playerImages[5];
          }
          playerRect.move_ip(speed, 0);
        }
        if (keys[pygame.K_LEFT]) {
          if (pygame.time.get_ticks() % 100 < 50) {
            playerImage = playerImages[3];
          } else {
            playerImage = playerImages[4];
          }
          playerRect.move_ip(-speed, 0);
        }

        // Check if the player and stone are colliding
        if (playerRect.colliderect(stoneRect)) {
          // Calculate the distance between the player and the stone
          const distanceRl = playerRect.right - stoneRect.left;
          const distanceLr = playerRect.left - stoneRect.right;
          const distanceTb = playerRect.top - stoneRect.bottom;
          const distanceBt = playerRect.bottom - stoneRect.top;

          // If the player is on the left of the stone and moving right, move the stone right as well
          if (playerRect.left < stoneRect.left && distanceRl <= 5 && keys[pygame.K_RIGHT]) {
            stoneRect.move_ip(            distanceRl, 0);
          }
          // If the player is on the right of the stone and moving left, move the stone left as well
          if (playerRect.right > stoneRect.right && distanceLr <= 5 && keys[pygame.K_LEFT]) {
            stoneRect.move_ip(distanceLr, 0);
          }
          // If the player is above the stone and moving down, move the stone down as well
          if (playerRect.top < stoneRect.top && distanceTb <= 5 && keys[pygame.K_DOWN]) {
            stoneRect.move_ip(0, distanceTb);
          }
          // If the player is below the stone and moving up, move the stone up as well
          if (playerRect.bottom > stoneRect.bottom && distanceBt <= 5 && keys[pygame.K_UP]) {
            stoneRect.move_ip(0, distanceBt);
          }
        }

        // Draw the background image
        screen.blit(background, [0, 0]);

        // Draw the player and stone
        screen.blit(playerImage, playerRect);
        screen.blit(stoneImage, stoneRect);

        // Update the display
        pygame.display.flip();

        // Limit the frame rate to 60 FPS
        clock.tick(60);
      }
    }
  </script>
</body>
</html>


